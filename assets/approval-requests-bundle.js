import{r as s,s as e,d as t,u as n,k as r,j as a,e as o,a as l,ag as i,g as u,O as p,y as c,an as d,B as j,ad as h,A as m,ao as v,ap as q,aq as f,ar as b,as as x,at as g,au as w,av as y,aw as k,ax as $,a0 as R,a1 as A,a2 as C,a3 as _,a4 as E,aj as S,a8 as T,aa as D,a9 as P,c as z,F as I,L as W,a6 as L,T as N,M as V,X as F,ay as B}from"shared";const H={ACTIVE:"active",APPROVED:"approved",REJECTED:"rejected",WITHDRAWN:"withdrawn"},J=e.div`
  display: flex;
  gap: ${s=>17*s.theme.space.base}px; /* 68px */
  align-items: flex-end;

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    flex-direction: column;
    align-items: normal;
    gap: ${s=>4*s.theme.space.base}px; /* 16px */
  }
`,O=e(t)`
  flex: 3;
`,M=e(t)`
  flex: 1;
`;var U=s.memo((function({approvalRequestStatus:e,setApprovalRequestStatus:t,setSearchTerm:c}){const{t:d}=n(),j=s.useCallback((s=>{switch(s){case"any":return d("approval-requests.list.status-dropdown.any","Any");case"active":return d("approval-requests.status.decision-pending","Decision pending");case"approved":return d("approval-requests.status.approved","Approved");case"rejected":return d("approval-requests.status.denied","Denied");case"withdrawn":return d("approval-requests.status.withdrawn","Withdrawn")}}),[d]),h=s.useCallback((s=>{s.selectionValue&&(t(s.selectionValue),c(""))}),[t,c]),m=s.useMemo((()=>r((s=>c(s)),300)),[c]),v=s.useCallback((s=>{m(s.target.value)}),[m]);return a.jsxs(J,{children:[a.jsxs(O,{children:[a.jsx(o,{hidden:!0,children:d("approval-requests.list.search-placeholder","Search approval requests")}),a.jsx(l,{start:a.jsx(i,{}),placeholder:d("approval-requests.list.search-placeholder","Search approval requests"),onChange:v})]}),a.jsxs(M,{children:[a.jsx(o,{children:d("approval-requests.list.status-dropdown.label_v2","Status")}),a.jsxs(u,{isEditable:!1,onChange:h,selectionValue:e,inputValue:j(e),children:[a.jsx(p,{value:"any",label:d("approval-requests.list.status-dropdown.any","Any")}),a.jsx(p,{value:H.ACTIVE,label:d("approval-requests.status.decision-pending","Decision pending")}),a.jsx(p,{value:H.APPROVED,label:d("approval-requests.status.approved","Approved")}),a.jsx(p,{value:H.REJECTED,label:d("approval-requests.status.denied","Denied")}),a.jsx(p,{value:H.WITHDRAWN,label:d("approval-requests.status.withdrawn","Withdrawn")})]})]})]})}));const X={hue:"grey",label:"Unknown status"};var K=s.memo((function({status:s}){const{t:e}=n(),t={[H.ACTIVE]:{hue:"blue",label:e("approval-requests.status.decision-pending","Decision pending")},[H.APPROVED]:{hue:"green",label:e("approval-requests.status.approved","Approved")},[H.REJECTED]:{hue:"red",label:e("approval-requests.status.denied","Denied")},[H.WITHDRAWN]:{hue:"grey",label:e("approval-requests.status.withdrawn","Withdrawn")}}[s]||X;return a.jsx(c,{hue:t.hue,children:a.jsx(d,{children:t.label})})}));const G=(s,e,t="short")=>{const n=new Date(s);return`${n.toLocaleDateString(e,{month:t,day:"numeric",year:"numeric"})} ${n.toLocaleTimeString(e,{hour:"2-digit",minute:"2-digit",hour12:!1})}`},Q=e(h)`
  color: ${s=>j("grey",600,s.theme)};
`;var Z=s.memo((function(){const{t:s}=n();return a.jsx(Q,{children:s("approval-requests.list.no-requests","No approval requests found.")})}));const Y=e(m)`
  &:visited {
    color: ${s=>j("blue",600,s.theme)};
  }
`,ss={style:{paddingTop:"22px",paddingBottom:"22px"},isTruncated:!0};var es=s.memo((function({approvalRequests:s,helpCenterPath:e,baseLocale:t,sortDirection:r,onSortChange:o}){const{t:l}=n();return a.jsxs(v,{size:"large",children:[a.jsx(q,{children:a.jsxs(f,{children:[a.jsx(b,{width:"40%",isTruncated:!0,children:l("approval-requests.list.table.subject","Subject")}),a.jsx(b,{isTruncated:!0,children:l("approval-requests.list.table.requester","Requester")}),a.jsx(b,{isTruncated:!0,children:l("approval-requests.list.table.sent-by","Sent by")}),a.jsx(x,{onClick:()=>{o("asc"===r?"desc":"desc"===r?void 0:"asc")},sort:r,cellProps:ss,children:l("approval-requests.list.table.sent-on","Sent on")}),a.jsx(b,{isTruncated:!0,children:l("approval-requests.list.table.approval-status","Approval status")})]})}),a.jsx(g,{children:0===s.length?a.jsx(w,{children:a.jsx(y,{colSpan:5,children:a.jsx(Z,{})})}):s.map((s=>a.jsxs(w,{children:[a.jsx(y,{isTruncated:!0,children:a.jsx(Y,{href:`${e}/approval_requests/${s.id}`,children:s.subject})}),a.jsx(y,{isTruncated:!0,children:s.requester_name}),a.jsx(y,{isTruncated:!0,children:s.created_by_name}),a.jsx(y,{isTruncated:!0,children:G(s.created_at,t)}),a.jsx(y,{isTruncated:!0,children:a.jsx(K,{status:s.status})})]},s.id)))})]})}));const ts=e.div`
  display: flex;
  flex-direction: column;
  gap: ${s=>s.theme.space.lg};
  margin-top: ${s=>s.theme.space.xl}; /* 40px */
`,ns=e.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;var rs=s.memo((function({baseLocale:e,helpCenterPath:t}){const{t:r}=n(),[o,l]=s.useState(""),[i,u]=s.useState(void 0),{approvalRequests:p,errorFetchingApprovalRequests:c,approvalRequestStatus:d,setApprovalRequestStatus:j,isLoading:h}=function(){const[e,t]=s.useState([]),[n,r]=s.useState(null),[a,o]=s.useState(!1),[l,i]=s.useState("any");return s.useEffect((()=>{(async()=>{o(!0);try{const s=await fetch("/api/v2/users/me.json");if(!s.ok)throw new Error("Error fetching current user data");const e=await s.json(),n="01JJQFNX5ADZ6PRQCFWRDNKZRD",r=await fetch(`/api/v2/approval_workflow_instances/${n}/approval_requests/search${"any"===l?"":`?status=${l}`}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":e.user.authenticity_token}});if(!r.ok)throw new Error("Error fetching approval requests");{const s=await r.json();t(s.approval_requests)}}catch(s){r(s)}finally{o(!1)}})()}),[l]),{approvalRequests:e,errorFetchingApprovalRequests:n,approvalRequestStatus:l,setApprovalRequestStatus:i,isLoading:a}}(),m=s.useMemo((()=>{let s=[...p];if(o){const e=o.toLowerCase();s=s.filter((s=>s.subject.toLowerCase().includes(e)))}return i&&s.sort(((s,e)=>{const t=new Date(s.created_at).getTime(),n=new Date(e.created_at).getTime();return"asc"===i?t-n:n-t})),s}),[p,o,i]);if(c)throw c;return h?a.jsx(ns,{children:a.jsx(k,{size:"64"})}):a.jsxs(ts,{children:[a.jsx($,{isBold:!0,children:r("approval-requests.list.header","Approval requests")}),a.jsx(U,{approvalRequestStatus:d,setApprovalRequestStatus:j,setSearchTerm:l}),0===p.length?a.jsx(Z,{}):a.jsx(es,{approvalRequests:m,baseLocale:e,helpCenterPath:t,sortDirection:i,onSortChange:u})]})}));async function as(s,e,t,n){const{baseLocale:r}=t;R(r),await A(r,[()=>function(s){switch(s){case"./translations/locales/af.json":return import("approval-requests-translations").then((function(s){return s.a}));case"./translations/locales/ar-x-pseudo.json":return import("approval-requests-translations").then((function(s){return s.b}));case"./translations/locales/ar.json":return import("approval-requests-translations").then((function(s){return s.c}));case"./translations/locales/az.json":return import("approval-requests-translations").then((function(s){return s.d}));case"./translations/locales/be.json":return import("approval-requests-translations").then((function(s){return s.e}));case"./translations/locales/bg.json":return import("approval-requests-translations").then((function(s){return s.f}));case"./translations/locales/bn.json":return import("approval-requests-translations").then((function(s){return s.g}));case"./translations/locales/bs.json":return import("approval-requests-translations").then((function(s){return s.h}));case"./translations/locales/ca.json":return import("approval-requests-translations").then((function(s){return s.i}));case"./translations/locales/cs.json":return import("approval-requests-translations").then((function(s){return s.j}));case"./translations/locales/cy.json":return import("approval-requests-translations").then((function(s){return s.k}));case"./translations/locales/da.json":return import("approval-requests-translations").then((function(s){return s.l}));case"./translations/locales/de-de.json":return import("approval-requests-translations").then((function(s){return s.m}));case"./translations/locales/de-x-informal.json":return import("approval-requests-translations").then((function(s){return s.n}));case"./translations/locales/de.json":return import("approval-requests-translations").then((function(s){return s.o}));case"./translations/locales/el.json":return import("approval-requests-translations").then((function(s){return s.p}));case"./translations/locales/en-001.json":return import("approval-requests-translations").then((function(s){return s.q}));case"./translations/locales/en-150.json":return import("approval-requests-translations").then((function(s){return s.r}));case"./translations/locales/en-au.json":return import("approval-requests-translations").then((function(s){return s.s}));case"./translations/locales/en-ca.json":return import("approval-requests-translations").then((function(s){return s.t}));case"./translations/locales/en-gb.json":return import("approval-requests-translations").then((function(s){return s.u}));case"./translations/locales/en-my.json":return import("approval-requests-translations").then((function(s){return s.v}));case"./translations/locales/en-ph.json":return import("approval-requests-translations").then((function(s){return s.w}));case"./translations/locales/en-se.json":return import("approval-requests-translations").then((function(s){return s.x}));case"./translations/locales/en-us.json":return import("approval-requests-translations").then((function(s){return s.y}));case"./translations/locales/en-x-dev.json":return import("approval-requests-translations").then((function(s){return s.z}));case"./translations/locales/en-x-keys.json":return import("approval-requests-translations").then((function(s){return s.A}));case"./translations/locales/en-x-obsolete.json":return import("approval-requests-translations").then((function(s){return s.B}));case"./translations/locales/en-x-pseudo.json":return import("approval-requests-translations").then((function(s){return s.C}));case"./translations/locales/en-x-test.json":return import("approval-requests-translations").then((function(s){return s.D}));case"./translations/locales/es-419.json":return import("approval-requests-translations").then((function(s){return s.E}));case"./translations/locales/es-ar.json":return import("approval-requests-translations").then((function(s){return s.F}));case"./translations/locales/es-cl.json":return import("approval-requests-translations").then((function(s){return s.G}));case"./translations/locales/es-es.json":return import("approval-requests-translations").then((function(s){return s.H}));case"./translations/locales/es-mx.json":return import("approval-requests-translations").then((function(s){return s.I}));case"./translations/locales/es-pe.json":return import("approval-requests-translations").then((function(s){return s.J}));case"./translations/locales/es.json":return import("approval-requests-translations").then((function(s){return s.K}));case"./translations/locales/et.json":return import("approval-requests-translations").then((function(s){return s.L}));case"./translations/locales/eu.json":return import("approval-requests-translations").then((function(s){return s.M}));case"./translations/locales/fa-af.json":return import("approval-requests-translations").then((function(s){return s.N}));case"./translations/locales/fa.json":return import("approval-requests-translations").then((function(s){return s.O}));case"./translations/locales/fi.json":return import("approval-requests-translations").then((function(s){return s.P}));case"./translations/locales/fil.json":return import("approval-requests-translations").then((function(s){return s.Q}));case"./translations/locales/fo.json":return import("approval-requests-translations").then((function(s){return s.R}));case"./translations/locales/fr-ca.json":return import("approval-requests-translations").then((function(s){return s.S}));case"./translations/locales/fr-dz.json":return import("approval-requests-translations").then((function(s){return s.T}));case"./translations/locales/fr-mu.json":return import("approval-requests-translations").then((function(s){return s.U}));case"./translations/locales/fr.json":return import("approval-requests-translations").then((function(s){return s.V}));case"./translations/locales/ga.json":return import("approval-requests-translations").then((function(s){return s.W}));case"./translations/locales/he.json":return import("approval-requests-translations").then((function(s){return s.X}));case"./translations/locales/hi.json":return import("approval-requests-translations").then((function(s){return s.Y}));case"./translations/locales/hr.json":return import("approval-requests-translations").then((function(s){return s.Z}));case"./translations/locales/hu.json":return import("approval-requests-translations").then((function(s){return s._}));case"./translations/locales/hy.json":return import("approval-requests-translations").then((function(s){return s.$}));case"./translations/locales/id.json":return import("approval-requests-translations").then((function(s){return s.a0}));case"./translations/locales/is.json":return import("approval-requests-translations").then((function(s){return s.a1}));case"./translations/locales/it-ch.json":return import("approval-requests-translations").then((function(s){return s.a2}));case"./translations/locales/it.json":return import("approval-requests-translations").then((function(s){return s.a3}));case"./translations/locales/ja.json":return import("approval-requests-translations").then((function(s){return s.a4}));case"./translations/locales/ka.json":return import("approval-requests-translations").then((function(s){return s.a5}));case"./translations/locales/kk.json":return import("approval-requests-translations").then((function(s){return s.a6}));case"./translations/locales/kl-dk.json":return import("approval-requests-translations").then((function(s){return s.a7}));case"./translations/locales/km.json":return import("approval-requests-translations").then((function(s){return s.a8}));case"./translations/locales/ko.json":return import("approval-requests-translations").then((function(s){return s.a9}));case"./translations/locales/ku.json":return import("approval-requests-translations").then((function(s){return s.aa}));case"./translations/locales/ky.json":return import("approval-requests-translations").then((function(s){return s.ab}));case"./translations/locales/lt.json":return import("approval-requests-translations").then((function(s){return s.ac}));case"./translations/locales/lv.json":return import("approval-requests-translations").then((function(s){return s.ad}));case"./translations/locales/mk.json":return import("approval-requests-translations").then((function(s){return s.ae}));case"./translations/locales/mn.json":return import("approval-requests-translations").then((function(s){return s.af}));case"./translations/locales/ms.json":return import("approval-requests-translations").then((function(s){return s.ag}));case"./translations/locales/mt.json":return import("approval-requests-translations").then((function(s){return s.ah}));case"./translations/locales/my.json":return import("approval-requests-translations").then((function(s){return s.ai}));case"./translations/locales/ne.json":return import("approval-requests-translations").then((function(s){return s.aj}));case"./translations/locales/nl-be.json":return import("approval-requests-translations").then((function(s){return s.ak}));case"./translations/locales/nl.json":return import("approval-requests-translations").then((function(s){return s.al}));case"./translations/locales/no.json":return import("approval-requests-translations").then((function(s){return s.am}));case"./translations/locales/pl.json":return import("approval-requests-translations").then((function(s){return s.an}));case"./translations/locales/pt-br.json":return import("approval-requests-translations").then((function(s){return s.ao}));case"./translations/locales/pt.json":return import("approval-requests-translations").then((function(s){return s.ap}));case"./translations/locales/ro-md.json":return import("approval-requests-translations").then((function(s){return s.aq}));case"./translations/locales/ro.json":return import("approval-requests-translations").then((function(s){return s.ar}));case"./translations/locales/ru.json":return import("approval-requests-translations").then((function(s){return s.as}));case"./translations/locales/si.json":return import("approval-requests-translations").then((function(s){return s.at}));case"./translations/locales/sk.json":return import("approval-requests-translations").then((function(s){return s.au}));case"./translations/locales/sl.json":return import("approval-requests-translations").then((function(s){return s.av}));case"./translations/locales/sq.json":return import("approval-requests-translations").then((function(s){return s.aw}));case"./translations/locales/sr-me.json":return import("approval-requests-translations").then((function(s){return s.ax}));case"./translations/locales/sr.json":return import("approval-requests-translations").then((function(s){return s.ay}));case"./translations/locales/sv.json":return import("approval-requests-translations").then((function(s){return s.az}));case"./translations/locales/sw-ke.json":return import("approval-requests-translations").then((function(s){return s.aA}));case"./translations/locales/ta.json":return import("approval-requests-translations").then((function(s){return s.aB}));case"./translations/locales/th.json":return import("approval-requests-translations").then((function(s){return s.aC}));case"./translations/locales/tr.json":return import("approval-requests-translations").then((function(s){return s.aD}));case"./translations/locales/uk.json":return import("approval-requests-translations").then((function(s){return s.aE}));case"./translations/locales/ur-pk.json":return import("approval-requests-translations").then((function(s){return s.aF}));case"./translations/locales/ur.json":return import("approval-requests-translations").then((function(s){return s.aG}));case"./translations/locales/uz.json":return import("approval-requests-translations").then((function(s){return s.aH}));case"./translations/locales/vi.json":return import("approval-requests-translations").then((function(s){return s.aI}));case"./translations/locales/zh-cn.json":return import("approval-requests-translations").then((function(s){return s.aJ}));case"./translations/locales/zh-tw.json":return import("approval-requests-translations").then((function(s){return s.aK}));default:return new Promise((function(e,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))}))}}(`./translations/locales/${r}.json`)]),C.render(a.jsx(_,{theme:E(e),children:a.jsx(S,{helpCenterPath:n,children:a.jsx(rs,{...t,helpCenterPath:n})})}),s)}const os=e.div`
  border-top: ${s=>`1px solid ${j("grey",300,s.theme)}`};
  display: flex;
  flex-direction: column;
  padding-top: ${s=>4*s.theme.space.base}px; /* 16px */
`,ls=e(h)`
  margin-bottom: ${s=>s.theme.space.xxs}; /* 4px */
`,is=e(h)`
  color: ${s=>j("grey",600,s.theme)};
`;function us(s){switch(s){case H.APPROVED:return"Approved";case H.REJECTED:return"Rejected";default:return s}}var ps=s.memo((function({decision:s,baseLocale:e}){const{t:t}=n();return a.jsxs(os,{children:[a.jsx(ls,{children:t("approval-requests.request.approval-request-details.previous-decision","Previous decision")}),a.jsxs(is,{children:[t(`approval-requests.request.approval-request-details.${s.status.toLowerCase()}`,us(s.status))," ",G(s.decided_at??"",e)]}),s.decision_notes&&a.jsx(is,{children:`"${s.decision_notes}"`})]})}));const cs=e(T)`
  padding: ${s=>6*s.theme.space.base}px; /* 24px */
  background: ${s=>j("grey",100,s.theme)};
  border-radius: ${s=>s.theme.borderRadii.md}; /* 4px */
`,ds=e(h)`
  margin-bottom: ${s=>4*s.theme.space.base}px; /* 16px */
`,js=e(h)`
  color: ${s=>j("grey",600,s.theme)};
`,hs=e(D)`
  margin-bottom: ${s=>s.theme.space.sm}; /* 12px */

  &:last-child {
    margin-bottom: 0;
  }
`;var ms=s.memo((function({approvalRequest:s,baseLocale:e}){const{t:t}=n(),r=s.status===H.WITHDRAWN?Boolean(s.withdrawn_reason):s.decisions.length>0,o=s.status===H.WITHDRAWN&&s.decisions.length>0;return a.jsxs(cs,{children:[a.jsx(ds,{isBold:!0,children:t("approval-requests.request.approval-request-details.header","Approval request details")}),a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t("approval-requests.request.approval-request-details.sent-by","Sent by")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:s.created_by_user.name})})]}),a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t("approval-requests.request.approval-request-details.sent-on","Sent on")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:G(s.created_at,e)})})]}),a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t("approval-requests.request.approval-request-details.approver","Approver")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:s.assignee_user.name})})]}),a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t("approval-requests.request.approval-request-details.status","Status")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:a.jsx(K,{status:s.status})})})]}),r&&a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t("approval-requests.request.approval-request-details.comment","Comment")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:s.status===H.WITHDRAWN?s.withdrawn_reason:s.decisions[0]?.decision_notes??"-"})})]}),s.decided_at&&a.jsxs(hs,{children:[a.jsx(P,{size:4,children:a.jsx(js,{children:t(s.status===H.WITHDRAWN?"approval-requests.request.approval-request-details.withdrawn-on":"approval-requests.request.approval-request-details.decided",s.status===H.WITHDRAWN?"Withdrawn on":"Decided")})}),a.jsx(P,{size:8,children:a.jsx(h,{children:G(s.decided_at,e)})})]}),o&&s.decisions[0]&&a.jsx(ps,{decision:s.decisions[0],baseLocale:e})]})}));const vs=e(T)`
  padding: ${s=>s.theme.space.md}; /* 20px */
  border: ${s=>s.theme.borders.sm}
    ${s=>j("grey",300,s.theme)};
  border-radius: ${s=>s.theme.borderRadii.md}; /* 4px */
`,qs=e(h)`
  margin-bottom: ${s=>s.theme.space.md}; /* 20px */
`,fs=e(h)`
  color: ${s=>j("grey",600,s.theme)};
`,bs=e(c)`
  margin-inline-end: ${s=>s.theme.space.xxs}; /* 4px */
`,xs=e.div`
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: ${s=>s.theme.space.md}; /* 20px */
  margin-top: ${s=>s.theme.space.md}; /* 20px */

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    grid-template-columns: repeat(2, 1fr);
  }
`,gs="-";function ws({value:s}){const{t:e}=n();return Array.isArray(s)&&s.length>0?a.jsx(h,{children:s.map((s=>a.jsx(bs,{hue:"grey",children:s},s)))}):"boolean"==typeof s?a.jsx(h,{children:s?e("approval-requests.request.ticket-details.checkbox-value.yes","Yes"):e("approval-requests.request.ticket-details.checkbox-value.no","No")}):!s||Array.isArray(s)&&0===s.length?a.jsx(h,{children:gs}):a.jsx(h,{children:s})}const ys={Low:"approval-requests.request.ticket-details.priority_low",Normal:"approval-requests.request.ticket-details.priority_normal",High:"approval-requests.request.ticket-details.priority_high",Urgent:"approval-requests.request.ticket-details.priority_urgent"};var ks=s.memo((function({ticket:s}){const{t:e}=n(),t=ys[s.priority]?e(ys[s.priority],s.priority):s.priority;return a.jsxs(vs,{children:[a.jsx(qs,{isBold:!0,children:e("approval-requests.request.ticket-details.header","Ticket details")}),a.jsxs(xs,{children:[a.jsxs("div",{children:[a.jsx(fs,{children:e("approval-requests.request.ticket-details.requester","Requester")}),a.jsx(h,{children:s.requester.name})]}),a.jsxs("div",{children:[a.jsx(fs,{children:e("approval-requests.request.ticket-details.id","ID")}),a.jsx(h,{children:s.id})]}),a.jsxs("div",{children:[a.jsx(fs,{children:e("approval-requests.request.ticket-details.priority","Priority")}),a.jsx(h,{children:t})]}),s.custom_fields.map((s=>a.jsxs("div",{children:[a.jsx(fs,{children:s.title_in_portal}),a.jsx(ws,{value:s.value})]},String(s.id))))]})]})}));const $s="APPROVED",Rs="REJECTED",As=e.div`
  display: flex;
  flex-direction: row;
  gap: ${s=>s.theme.space.md}; /* 20px */
  margin-inline-start: ${s=>s.hasAvatar?"55px":"0"}; // avatar width + margin + border

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    flex-direction: ${s=>s.isSubmitButton?"row-reverse":"column"};
    gap: ${s=>4*s.theme.space.base}px; /* 16px */
  }
`,Cs=e.div`
  display: flex;
  flex-direction: column;
  gap: ${s=>s.theme.space.lg}; /* 32px */

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    gap: ${s=>4*s.theme.space.base}px; /* 16px */
  }
`,_s=e.div`
  width: calc(
    (100% * 2) / 3 - 16px
  ); /* matches the width of the LeftColumn in the parent container */
  margin-top: ${s=>s.theme.space.lg}; /* 32px */

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    width: 100%;
  }
`,Es=e.div`
  display: flex;
  gap: ${s=>4*s.theme.space.base}px; /* 16px */
  margin-top: ${s=>6*s.theme.space.base}px; /* 24px */
  align-items: flex-start;
`;var Ss=s.memo((function({approvalRequestId:e,approvalWorkflowInstanceId:t,setApprovalRequest:r,assigneeUser:o}){const{t:l}=n(),i=z(),[u,p]=s.useState(""),[c,d]=s.useState(null),[j,h]=s.useState(!1),[m,v]=s.useState(!1),q=c!==Rs||""!==u.trim(),f=m&&!q,b=s.useCallback((()=>{d($s),v(!1)}),[]),x=s.useCallback((()=>{d(Rs),v(!1)}),[]),g=s.useCallback((s=>{p(s.target.value)}),[]),w=s.useCallback((()=>{d(null),p(""),v(!1)}),[]),y=async()=>{if(v(!0),c&&q){h(!0);try{const s=c===$s?H.APPROVED:H.REJECTED,n=await async function(s,e,t,n){try{const r=await fetch("/api/v2/users/me.json");if(!r.ok)throw new Error("Error fetching current user data");const a=await r.json();return await fetch(`/api/v2/approval_workflow_instances/${s}/approval_requests/${e}/decision`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-Token":a.user.authenticity_token},body:JSON.stringify({status:t,notes:n})})}catch(s){throw console.error("Error submitting approval decision:",s),s}}(t,e,s,u);if(!n.ok)throw new Error(`Failed to submit ${s} decision`);{const e=await n.json();r(e.approval_request);const t=s===H.APPROVED?l("approval-requests.request.notification.approval-submitted","Approval submitted"):l("approval-requests.request.notification.denial-submitted","Denial submitted");i({type:"success",title:t,message:""})}}catch(s){i({type:"error",title:"Error submitting decision",message:"Please try again later"})}finally{h(!1)}}};if(c){const s=c===$s?l("approval-requests.request.approver-actions.additional-note-label","Additional note"):l("approval-requests.request.approver-actions.denial-reason-label","Reason for denial* (Required)"),e=Boolean(o?.photo?.content_url);return a.jsx(_s,{children:a.jsxs(Cs,{children:[a.jsxs(I,{children:[a.jsx(W,{children:s}),a.jsxs(Es,{children:[e&&a.jsx(L,{children:a.jsx("img",{alt:"Assignee avatar",src:o.photo.content_url??void 0})}),a.jsx(N,{minRows:5,value:u,onChange:g,disabled:j,validation:f?"error":void 0})]}),f&&a.jsx(V,{validation:"error",children:l("approval-requests.request.approver-actions.denial-reason-validation","Enter a reason for denial")})]}),a.jsxs(As,{hasAvatar:e,isSubmitButton:!0,children:[a.jsx(F,{isPrimary:c===$s,onClick:y,disabled:j,children:c===$s?l("approval-requests.request.approver-actions.submit-approval","Submit approval"):l("approval-requests.request.approver-actions.submit-denial","Submit denial")}),a.jsx(F,{onClick:w,disabled:j,children:l("approval-requests.request.approver-actions.cancel","Cancel")})]})]})})}return a.jsx(_s,{children:a.jsxs(As,{children:[a.jsx(F,{isPrimary:!0,onClick:b,children:l("approval-requests.request.approver-actions.approve-request","Approve request")}),a.jsx(F,{onClick:x,children:l("approval-requests.request.approver-actions.deny-request","Deny request")})]})})}));const Ts=e(B)`
  margin-top: ${s=>s.theme.space.lg}; /* 32px */
`,Ds=e(m)`
  &:visited {
    color: ${s=>j("blue",600,s.theme)};
  }
`;var Ps=s.memo((function({organizations:s,helpCenterPath:e}){const{t:t}=n(),r=s.length>0?s[0]?.name:null;return r?a.jsxs(Ts,{children:[a.jsx(Ds,{href:e,children:r}),a.jsx(Ds,{href:`${e}/approval_requests`,children:t("approval-requests.list.header","Approval requests")})]}):a.jsx(Ts,{children:a.jsx(Ds,{href:`${e}/approval_requests`,children:t("approval-requests.list.header","Approval requests")})})}));const zs=e.div`
  display: flex;
  flex-direction: row;
  margin-top: ${s=>s.theme.space.xl}; /* 40px */
  margin-bottom: ${s=>s.theme.space.lg}; /* 32px */

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    flex-direction: column;
    margin-bottom: ${s=>s.theme.space.xl}; /* 40px */
  }
`,Is=e.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,Ws=e.div`
  flex: 2;

  & > *:first-child {
    margin-bottom: ${s=>4*s.theme.space.base}px; /* 16px */
  }

  & > *:not(:first-child) {
    margin-bottom: ${s=>s.theme.space.lg}; /* 32px */
  }

  & > *:last-child {
    margin-bottom: 0;
  }

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    flex: 1;
    margin-inline-end: 0;
    margin-bottom: ${s=>s.theme.space.lg};
  }
`,Ls=e.div`
  flex: 1;
  margin-inline-start: ${s=>6*s.theme.space.base}px; /* 24px */

  @media (max-width: ${s=>s.theme.breakpoints.md}) {
    margin-inline-start: 0;
  }
`;var Ns=s.memo((function({approvalWorkflowInstanceId:e,approvalRequestId:t,baseLocale:n,helpCenterPath:r,organizations:o,userId:l}){const{approvalRequest:i,setApprovalRequest:u,errorFetchingApprovalRequest:p,isLoading:c}=function(e,t){const[n,r]=s.useState(),[a,o]=s.useState(null),[l,i]=s.useState(!1);return s.useEffect((()=>{(async()=>{i(!0);try{const s=await fetch(`/api/v2/approval_workflow_instances/${e}/approval_requests/${t}`);if(!s.ok)throw new Error("Error fetching approval request");{const e=await s.json();r(e.approval_request)}}catch(s){o(s)}finally{i(!1)}})()}),[t,e]),{approvalRequest:n,errorFetchingApprovalRequest:a,isLoading:l,setApprovalRequest:r}}(e,t);if(p)throw p;if(c)return a.jsx(Is,{children:a.jsx(k,{size:"64"})});const d=l===i?.assignee_user?.id&&"active"===i?.status;return a.jsxs(a.Fragment,{children:[a.jsx(Ps,{helpCenterPath:r,organizations:o}),a.jsxs(zs,{children:[a.jsxs(Ws,{children:[a.jsx($,{isBold:!0,children:i?.subject}),a.jsx(h,{children:i?.message}),i?.ticket_details&&a.jsx(ks,{ticket:i.ticket_details})]}),a.jsx(Ls,{children:i&&a.jsx(ms,{approvalRequest:i,baseLocale:n})})]}),d&&a.jsx(Ss,{approvalWorkflowInstanceId:e,approvalRequestId:t,setApprovalRequest:u,assigneeUser:i?.assignee_user})]})}));async function Vs(s,e,t,n){const{baseLocale:r}=t;R(r),await A(r,[()=>function(s){switch(s){case"./translations/locales/af.json":return import("approval-requests-translations").then((function(s){return s.a}));case"./translations/locales/ar-x-pseudo.json":return import("approval-requests-translations").then((function(s){return s.b}));case"./translations/locales/ar.json":return import("approval-requests-translations").then((function(s){return s.c}));case"./translations/locales/az.json":return import("approval-requests-translations").then((function(s){return s.d}));case"./translations/locales/be.json":return import("approval-requests-translations").then((function(s){return s.e}));case"./translations/locales/bg.json":return import("approval-requests-translations").then((function(s){return s.f}));case"./translations/locales/bn.json":return import("approval-requests-translations").then((function(s){return s.g}));case"./translations/locales/bs.json":return import("approval-requests-translations").then((function(s){return s.h}));case"./translations/locales/ca.json":return import("approval-requests-translations").then((function(s){return s.i}));case"./translations/locales/cs.json":return import("approval-requests-translations").then((function(s){return s.j}));case"./translations/locales/cy.json":return import("approval-requests-translations").then((function(s){return s.k}));case"./translations/locales/da.json":return import("approval-requests-translations").then((function(s){return s.l}));case"./translations/locales/de-de.json":return import("approval-requests-translations").then((function(s){return s.m}));case"./translations/locales/de-x-informal.json":return import("approval-requests-translations").then((function(s){return s.n}));case"./translations/locales/de.json":return import("approval-requests-translations").then((function(s){return s.o}));case"./translations/locales/el.json":return import("approval-requests-translations").then((function(s){return s.p}));case"./translations/locales/en-001.json":return import("approval-requests-translations").then((function(s){return s.q}));case"./translations/locales/en-150.json":return import("approval-requests-translations").then((function(s){return s.r}));case"./translations/locales/en-au.json":return import("approval-requests-translations").then((function(s){return s.s}));case"./translations/locales/en-ca.json":return import("approval-requests-translations").then((function(s){return s.t}));case"./translations/locales/en-gb.json":return import("approval-requests-translations").then((function(s){return s.u}));case"./translations/locales/en-my.json":return import("approval-requests-translations").then((function(s){return s.v}));case"./translations/locales/en-ph.json":return import("approval-requests-translations").then((function(s){return s.w}));case"./translations/locales/en-se.json":return import("approval-requests-translations").then((function(s){return s.x}));case"./translations/locales/en-us.json":return import("approval-requests-translations").then((function(s){return s.y}));case"./translations/locales/en-x-dev.json":return import("approval-requests-translations").then((function(s){return s.z}));case"./translations/locales/en-x-keys.json":return import("approval-requests-translations").then((function(s){return s.A}));case"./translations/locales/en-x-obsolete.json":return import("approval-requests-translations").then((function(s){return s.B}));case"./translations/locales/en-x-pseudo.json":return import("approval-requests-translations").then((function(s){return s.C}));case"./translations/locales/en-x-test.json":return import("approval-requests-translations").then((function(s){return s.D}));case"./translations/locales/es-419.json":return import("approval-requests-translations").then((function(s){return s.E}));case"./translations/locales/es-ar.json":return import("approval-requests-translations").then((function(s){return s.F}));case"./translations/locales/es-cl.json":return import("approval-requests-translations").then((function(s){return s.G}));case"./translations/locales/es-es.json":return import("approval-requests-translations").then((function(s){return s.H}));case"./translations/locales/es-mx.json":return import("approval-requests-translations").then((function(s){return s.I}));case"./translations/locales/es-pe.json":return import("approval-requests-translations").then((function(s){return s.J}));case"./translations/locales/es.json":return import("approval-requests-translations").then((function(s){return s.K}));case"./translations/locales/et.json":return import("approval-requests-translations").then((function(s){return s.L}));case"./translations/locales/eu.json":return import("approval-requests-translations").then((function(s){return s.M}));case"./translations/locales/fa-af.json":return import("approval-requests-translations").then((function(s){return s.N}));case"./translations/locales/fa.json":return import("approval-requests-translations").then((function(s){return s.O}));case"./translations/locales/fi.json":return import("approval-requests-translations").then((function(s){return s.P}));case"./translations/locales/fil.json":return import("approval-requests-translations").then((function(s){return s.Q}));case"./translations/locales/fo.json":return import("approval-requests-translations").then((function(s){return s.R}));case"./translations/locales/fr-ca.json":return import("approval-requests-translations").then((function(s){return s.S}));case"./translations/locales/fr-dz.json":return import("approval-requests-translations").then((function(s){return s.T}));case"./translations/locales/fr-mu.json":return import("approval-requests-translations").then((function(s){return s.U}));case"./translations/locales/fr.json":return import("approval-requests-translations").then((function(s){return s.V}));case"./translations/locales/ga.json":return import("approval-requests-translations").then((function(s){return s.W}));case"./translations/locales/he.json":return import("approval-requests-translations").then((function(s){return s.X}));case"./translations/locales/hi.json":return import("approval-requests-translations").then((function(s){return s.Y}));case"./translations/locales/hr.json":return import("approval-requests-translations").then((function(s){return s.Z}));case"./translations/locales/hu.json":return import("approval-requests-translations").then((function(s){return s._}));case"./translations/locales/hy.json":return import("approval-requests-translations").then((function(s){return s.$}));case"./translations/locales/id.json":return import("approval-requests-translations").then((function(s){return s.a0}));case"./translations/locales/is.json":return import("approval-requests-translations").then((function(s){return s.a1}));case"./translations/locales/it-ch.json":return import("approval-requests-translations").then((function(s){return s.a2}));case"./translations/locales/it.json":return import("approval-requests-translations").then((function(s){return s.a3}));case"./translations/locales/ja.json":return import("approval-requests-translations").then((function(s){return s.a4}));case"./translations/locales/ka.json":return import("approval-requests-translations").then((function(s){return s.a5}));case"./translations/locales/kk.json":return import("approval-requests-translations").then((function(s){return s.a6}));case"./translations/locales/kl-dk.json":return import("approval-requests-translations").then((function(s){return s.a7}));case"./translations/locales/km.json":return import("approval-requests-translations").then((function(s){return s.a8}));case"./translations/locales/ko.json":return import("approval-requests-translations").then((function(s){return s.a9}));case"./translations/locales/ku.json":return import("approval-requests-translations").then((function(s){return s.aa}));case"./translations/locales/ky.json":return import("approval-requests-translations").then((function(s){return s.ab}));case"./translations/locales/lt.json":return import("approval-requests-translations").then((function(s){return s.ac}));case"./translations/locales/lv.json":return import("approval-requests-translations").then((function(s){return s.ad}));case"./translations/locales/mk.json":return import("approval-requests-translations").then((function(s){return s.ae}));case"./translations/locales/mn.json":return import("approval-requests-translations").then((function(s){return s.af}));case"./translations/locales/ms.json":return import("approval-requests-translations").then((function(s){return s.ag}));case"./translations/locales/mt.json":return import("approval-requests-translations").then((function(s){return s.ah}));case"./translations/locales/my.json":return import("approval-requests-translations").then((function(s){return s.ai}));case"./translations/locales/ne.json":return import("approval-requests-translations").then((function(s){return s.aj}));case"./translations/locales/nl-be.json":return import("approval-requests-translations").then((function(s){return s.ak}));case"./translations/locales/nl.json":return import("approval-requests-translations").then((function(s){return s.al}));case"./translations/locales/no.json":return import("approval-requests-translations").then((function(s){return s.am}));case"./translations/locales/pl.json":return import("approval-requests-translations").then((function(s){return s.an}));case"./translations/locales/pt-br.json":return import("approval-requests-translations").then((function(s){return s.ao}));case"./translations/locales/pt.json":return import("approval-requests-translations").then((function(s){return s.ap}));case"./translations/locales/ro-md.json":return import("approval-requests-translations").then((function(s){return s.aq}));case"./translations/locales/ro.json":return import("approval-requests-translations").then((function(s){return s.ar}));case"./translations/locales/ru.json":return import("approval-requests-translations").then((function(s){return s.as}));case"./translations/locales/si.json":return import("approval-requests-translations").then((function(s){return s.at}));case"./translations/locales/sk.json":return import("approval-requests-translations").then((function(s){return s.au}));case"./translations/locales/sl.json":return import("approval-requests-translations").then((function(s){return s.av}));case"./translations/locales/sq.json":return import("approval-requests-translations").then((function(s){return s.aw}));case"./translations/locales/sr-me.json":return import("approval-requests-translations").then((function(s){return s.ax}));case"./translations/locales/sr.json":return import("approval-requests-translations").then((function(s){return s.ay}));case"./translations/locales/sv.json":return import("approval-requests-translations").then((function(s){return s.az}));case"./translations/locales/sw-ke.json":return import("approval-requests-translations").then((function(s){return s.aA}));case"./translations/locales/ta.json":return import("approval-requests-translations").then((function(s){return s.aB}));case"./translations/locales/th.json":return import("approval-requests-translations").then((function(s){return s.aC}));case"./translations/locales/tr.json":return import("approval-requests-translations").then((function(s){return s.aD}));case"./translations/locales/uk.json":return import("approval-requests-translations").then((function(s){return s.aE}));case"./translations/locales/ur-pk.json":return import("approval-requests-translations").then((function(s){return s.aF}));case"./translations/locales/ur.json":return import("approval-requests-translations").then((function(s){return s.aG}));case"./translations/locales/uz.json":return import("approval-requests-translations").then((function(s){return s.aH}));case"./translations/locales/vi.json":return import("approval-requests-translations").then((function(s){return s.aI}));case"./translations/locales/zh-cn.json":return import("approval-requests-translations").then((function(s){return s.aJ}));case"./translations/locales/zh-tw.json":return import("approval-requests-translations").then((function(s){return s.aK}));default:return new Promise((function(e,t){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+s)))}))}}(`./translations/locales/${r}.json`)]),C.render(a.jsx(_,{theme:E(e),children:a.jsx(S,{helpCenterPath:n,children:a.jsx(Ns,{...t,helpCenterPath:n})})}),s)}export{Vs as renderApprovalRequest,as as renderApprovalRequestList};
